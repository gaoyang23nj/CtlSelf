\section{Conclusion}
\label{sec:conclude}
In this paper, we have analytically investigated 
the state transition of nodes in the opportunistic networks. 
The ordinary differential equation models have been constructed to
capture the message dissemination with complete detection,
which can suppress the increment of selfish node number.
To achieve the tradeoff the reward and the detection cost
in the message lifetime,
we propose the optimal solution of the selfish node detection
based on the Pontryagin's maximum principle. 
The soundness of the models and the accuracy of the analysis
have been verified via extensive simulation.