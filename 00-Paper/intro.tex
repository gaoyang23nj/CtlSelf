\section{Introduction}
\label{sec:intro}
Recent advances in mobile communication,
devices manufacturing and data technologies have
made the deployment and applications of Opportunistic Networks
(OppNets) possible.
Typically,
mobile users in the emergency scenarios can
opportunistically communicate and share
resources with each other~\cite{DBLP:journals/tsc/KhalidKKZ14,
DBLP:journals/tmc/ChatzopoulosAKH18,
DBLP:journals/tmc/LiQJHW014}.
Meanwhile,
information dissemination
in mobile social networks is exploited by
the opportunistic communication~\cite{DBLP:journals/tmc/HanHKMSS12}.
By deploying the OppNets,
not only the ubiquitous communication can be
implemented with a `store-carry-forward' approach,
but also the temporary networking
in the environment without the pre-established infrastructures
becomes more likely.

Unfortunately,
the communication in OppNets relies on
the cooperation of contacted nodes,
which may suffer from the following problems.
First,
the mobile user with limited resources,
i.e.,
battery capacity
and network bandwidth,
will exhibit individual selfishness and not be
reluctant to relay data for others~\cite{DBLP:journals/comsur/JedariXN18}.
Second,
due to the existing social relations,
users prefer to
provide forwarding services for their friends or strangers
with the same social objectives~\cite{DBLP:journals/tmc/HanHKMSS12}.
Third,
the message or data are prestored in mobile user's buffer
and delivered when encounter others.
This pattern obviously brings 
the new safety risk~\cite{Saha2018Design},
and leads to a lower participation willingness of the collaboration.
These selfish behaviors have seriously
affected the performance
of data dissemination in OppNets.


%the OppNets adopt a `store-carry-forward' paradigm
%the communication of opportunistic network depends on nodes
%cooperating with each other.

%%Opportunistic networks (OppNets)
%%have been attracting the research attentions in the recent years,
%%which are usually exploited to
%%provide the communication service
%%as the valid complement of the cellular network,
%%especially in the remote areas
%%and in the emergency situations~\cite{DBLP:journals/tsc/KhalidKKZ14,
%%DBLP:journals/tmc/ChatzopoulosAKH18,
%%DBLP:journals/tmc/HanHKMSS12,
%%DBLP:journals/tmc/LiQJHW014}.
%%%describe the scenario,
%%%where the communication link may be
%%%established with contact opportunities
%%%among mobile nodes.
%%With the popularity of mobile communication devices,
%%various OppNet-based
%%applications~\cite{DBLP:journals/tsc/KhalidKKZ14,
%%DBLP:journals/tmc/ChatzopoulosAKH18} are designed and deployed
%%in the academia and industry
%%besides the traditional advertisement and communication application.
%%%At present, with a widespread use and
%%%availability of mobile communication devices,
%%%OppNets presents very broad development prospect,
%%%and numerous applications rely on it prospered.
%%% consider?
%%\cite{DBLP:journals/tsc/KhalidKKZ14} presented
%%a venue recommendation platform OmniSuggest based on OppNets,
%%which exploited the mobility pattern
%%to achieve the optimal recommendations.
%%%where where mobility patterns of users are tracked.
%%%to generate optimal venue recommendations.
%%%In this project, user activities,
%%Inspired by the message forwarding in OppNets,
%%the computation offloading framework,
%%which integrates the incentive scheme and the reputation mechanism,
%%was proposed to reduce the execution time and energy consumption
%%in the scenarios without cellular infrastructures~\cite{DBLP:journals/tmc/ChatzopoulosAKH18}.
%%can also be utilized to construct
%%a platform to offload the heavy tasks
%%a distributed computing task platform
%%The opportunistic computing technology utilize
%%the shared resources of OppNets to
%%provide a platform for the execution
%%of distributed computing tasks~\cite{DBLP:journals/tmc/ChatzopoulosAKH18}.
%%More examples can be found in mobile data offloading,
%%such as~\cite{DBLP:journals/tmc/HanHKMSS12,
%%DBLP:journals/tmc/LiQJHW014}.

To overcome above-mentioned problems,
much research effort on the routing schemes
exist in the literature~\cite{DBLP:journals/tpds/ZhuDGDC14,
DBLP:conf/mobicom/MartiGLB00,
DBLP:journals/tmc/LoretiB20}.
At the other end of the spectrum,
selfish node detection schemes,
which distinguish the selfish behaviors
and design the reasonable mechanism to
incentive the users,
is a more efficient approach to improve
message delivery in OppNets.
%where the message dissemination performance
%dominates the applications of
%OppNets
%
%%Exploiting mobile nodes to transmit message in
%%OppNets has been attracting
%%increasing research attentions
%%\cite{DBLP:conf/sigcomm/SouzaMSMCC16,
%%DBLP:conf/mobicom/RadenkovicH17,
%%DBLP:journals/comsur/JedariXN18,
%%DBLP:journals/tmc/LoretiB20}.
%However, the selfish behavior is also
%the bottleneck of the routing performance besides the routing methods,
%especially considering that
%the message carrying service will occupy
%the limited energy and memory of the.
%Thus how to suppress the selfish behaviors
%becomes another critical issue in OppNets.
%%Traditional message dissemination approaches
%%heavily rely on voluntary cooperation between
%%mobile nodes, which excessively consumes the
%%limited energy supply and lead to massive useless
%%message copies due to the selfish behavior.
%%%Adopting selfish node detection mechanisms
%%%to avoid selfish nodes involved in data forwarding,
%%%reduces and balances the communication loads
%%%of nodes (and thus their energy consumptions).
%%However, selfish node detection leads to network
%%management cost due to the detecting expense, and
%%introduce extra detection traffic,
%%degrading the overall performance of OppNets.
%A valid methodology to mitigate the selfish behaviors
%is conducting the selfish node detection.
%Much research effort on selfish node detection
%exists in the literature.
Normally,
the detection schemes
can be divided into two categories
in light of their aims:
watchdog systems~\cite{DBLP:journals/tmc/Hernandez-Orallo15,
DBLP:journals/tie/DiasRXM15,
DBLP:journals/fgcs/JedariXCDTA19}
and social trust-based communications~\cite{DBLP:journals/tdsc/ChoC18,
DBLP:conf/sigcomm/SouzaMSMCC16,
DBLP:journals/tmc/ChoiSLW12}.
The former intends to detect selfish behavior
by analyzing the traffic received
from their contacted nodes,
while the latter establishes social trust relationships
to select trusted and secured relay nodes.
Most of these works
focus on alleviating the selfish behaviors
or stimulating the mobile users to participate in cooperation,
but introduce the extra detection traffic
and degrade the overall performance of OppNets.
%either watchdog system methods
%or social trust-based communicating approaches,
%Incentive methods, i.e., reward,
%are often exploited to attract the cooperations of nodes.
%But the selfish nodes can pretend to carry the message
%and gain the reward by cheating at the same time.

In this paper,
we tackle this problem from another angle.
Following a Pontryagin's maximum principle,
we try to find the optimal control
of the state transition of nodes,
and thus the selfish behavior can be
mitigated obviously.

%With a widespread use and availability of
%mobile communication devices, numerous applications
%emerge based on message transmission in OppNets,
%especially in mobile social networks (OMSNs).
%The opportunistic computing technology utilize
%the shared resources of OMSNs to
%provide a platform for the execution
%of distributed computing tasks,
The main contributions are as follows.

\begin{itemize}
\item {We formulate the ordinary differential equation (ODE) model
to capture and analytically evaluate the state transition of nodes
in OppNets without detection and with complete detection.}
\item {We propose an optimal solution of selfish node detection
based on the Pontryagin's maximum principle
to achieve the tradeoff between the detection cost
and the reward of selfish behaviors.}
\item {We conduct experiments to evaluate
the effectiveness of the proposed model
and the optimal selfish detection solution
in terms of the total cost, the wasted reward and the node state transition.}
\end{itemize}

The rest of this paper is organized as follows.
The literature is reviewed in Section~\ref{sec:related}.
We formulate the problem in Section~\ref{sec:preli}.
The change of node state in the network without detection 
and with complete detection
is investigated in Section~\ref{sec:ode_model}.
The optimal solution of the selfish detection in OppNets
is presented in Section~\ref{sec:opt_detect},
and evaluated in Section~\ref{sec:pe}.
The paper concludes in Section~\ref{sec:conclude}.
